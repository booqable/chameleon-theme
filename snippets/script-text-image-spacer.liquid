<script>
  const sectionSpacer = () => {
    const sections = document.querySelectorAll('.text-image'),
          classes = ['palette-one', 'palette-two', 'palette-three'];

    sections.forEach(section => {
      const children = [...section.children];

      children.forEach(child => {
        if (!child.classList.contains('text-image__spacer')) return false;

        const prevSection = section.previousElementSibling;

        if (!prevSection) return false;

        const prevChildren = [...prevSection.children];

        prevChildren.forEach(item => {
          const itemClasses = classes.filter(className => item.classList.contains(className)),
                childClasses = classes.filter(className => child.classList.contains(className));

          itemClasses.forEach(itemClass => {
            const replaceClass = childClasses.find(childClass => child.classList.contains(childClass));

            if (replaceClass) child.classList.replace(replaceClass, itemClass);
          })
        })
      })
    })
  }

  sectionSpacer()

  document.addEventListener("preview:ready", () => {
    sectionSpacer()
  })
</script>
