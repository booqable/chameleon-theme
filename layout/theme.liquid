<!DOCTYPE html>
<html lang="{{ locale }}" class="{{- settings.element_design -}}-design">
  <head>
    {% comment %} Base metadata {% endcomment %}
    {%- render 'page-base-meta',
        brand_color: branding_color,
        canonical_url: canonical_url,
        page_description: page_description,
        page_title: page_title,
        settings: settings,
        shop: shop
    -%}

    {% comment %} Resource hints for performance {% endcomment %}
    {%- render 'page-resource-hints' -%}

    {% comment %} Preload fonts {% endcomment %}
    {%- render 'fonts', settings: settings -%}

    {% comment %} Load root styles {% endcomment %}
    {%- render 'root-styles', settings: settings -%}

    {% comment %} Load critical above-the-fold styles {% endcomment %}
    {%- render 'critical-css' -%}

    {% comment %} Async CSS loading with resource hints {% endcomment %}
    {%- assign base_url = 'base.css' | asset_url -%}
    {%- assign rx_url = 'rx.css' | asset_url -%}

    <link rel="preload" href="{{ base_url }}" as="style">
    <link rel="preload" href="{{ rx_url }}" as="style">
    <link rel="stylesheet" href="{{ base_url }}" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="{{ rx_url }}" media="print" onload="this.media='all'">

    <noscript>
      <link rel="stylesheet" href="{{ base_url }}">
      <link rel="stylesheet" href="{{ rx_url }}">
    </noscript>

    {{ content_for_header }}

    {%- render 'page-social-share-meta',
        canonical_url: canonical_url,
        locale: locale,
        image_url: page_meta_image_url,
        image_alt: page_meta_image_alt,
        page_description: page_description,
        page_title: page_title,
        product: product,
        shop: shop
    -%}

    {% comment %} Enhanced performance monitoring {% endcomment %}
    {%- render 'page-performance-monitoring' -%}
  </head>
  <body>
    <header class="header" id="header">
      {% section 'top-bar' %}
      {% section 'header' %}
    </header>

    <main id="main">
      {{ content_for_layout }}
    </main>

    {% section 'footer' %}

    {%- render 'cookie-notice-variables', settings: settings -%}

    <script src="{{ "lazysizes.min.js" | asset_url }}" defer></script>
    <script src="{{ "touch-device-notch.js" | asset_url }}" defer></script>
    <script src="{{ "main.js" | asset_url }}" defer></script>
    <script src="{{ "text-with-image.js" | asset_url }}" defer></script>
    <script src="{{ "header.js" | asset_url }}" defer></script>
    <script src="{{ "carousel.js" | asset_url }}" defer></script>
    <script src="{{ "sidebar.js" | asset_url }}" defer></script>
    <script src="{{ 'js-cookie-notice-styles-loading.js' | asset_url }}" defer></script>

    {%- if show_mini_cart -%}
      {%- render 'variables-mini-cart', settings: settings, color_palette: "one" -%}
    {%- endif -%}

    {{ content_for_body }}

  </body>
</html>
