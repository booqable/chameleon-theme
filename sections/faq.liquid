{%- assign blocks = section.blocks -%}

{%- if blocks.size > 0 -%}

  {{ "faq.css" | asset_url | stylesheet_tag }}
  {{ "accordion.css" | asset_url | stylesheet_tag }}

  {%- assign title                 = section.settings.title -%}
  {%- assign title_bg              = section.settings.title_bg -%}
  {%- assign description           = section.settings.description -%}
  {%- assign behavior              = section.settings.behavior -%}
  {%- assign background            = section.settings.background -%}
  {%- assign color                 = section.settings.color -%}
  {%- assign title_color           = section.settings.title_color -%}
  {%- assign border_color          = section.settings.border_color -%}
  {%- assign padding_top           = section.settings.padding_top -%}
  {%- assign padding_bottom        = section.settings.padding_bottom -%}
  {%- assign padding_top_mobile    = section.settings.padding_top_mobile -%}
  {%- assign padding_bottom_mobile = section.settings.padding_bottom_mobile -%}

  {% comment %} CSS variables start {% endcomment %}
  {%- capture variables -%}
    {%- if background != blank -%}
      --color-primary-foreground: {{ background }};
    {%- endif -%}
    {%- if color != blank -%}
      --color-third-foreground: {{ color }};
    {%- endif -%}
    {%- if title_color != blank -%}
      --color-primary-background: {{ title_color }};
    {%- endif -%}
    {%- if border_color != blank -%}
      --color-fourth-foreground: {{ border_color }};
      --color-border-secondary: {{ border_color }};
    {%- endif -%}
    {%- if padding_top != blank -%}
      --padding-top: {{ padding_top }}px;
    {%- endif -%}
    {%- if padding_bottom != blank -%}
      --padding-bottom: {{ padding_bottom }}px;
    {%- endif -%}
    {%- if padding_top_mobile != blank -%}
      --padding-top-mobile: {{ padding_top_mobile }}px;
    {%- endif -%}
    {%- if padding_bottom_mobile != blank -%}
      --padding-bottom-mobile: {{ padding_bottom_mobile }}px;
    {%- endif -%}
  {%- endcapture -%}
  {% comment %} CSS variables end {% endcomment %}

  <div
    class="faq__wrapper{% if padding_top != blank or padding_top_mobile != blank %} faq__wrapper--padding-top{% endif %}{% if padding_bottom != blank or padding_bottom_mobile != blank %} faq__wrapper--padding-bottom{%- endif -%}"
    style="{{- variables | escape -}}"
  >
    <div class="faq__container container">
      <div class="faq__top">
        {%- if title != blank -%}
          <h2 class="faq__title">{{- title -}}</h2>
        {%- endif -%}

        {%- if description != blank -%}
          <div class="faq__description">{{- description -}}</div>
        {%- endif -%}

        {%- if title_bg != blank -%}
          <h2 class="faq__title_bg">{{- title_bg -}}</h2>
        {%- endif -%}
      </div>

      {%- render 'accordion', blocks: blocks, behavior: behavior -%}

    </div>
  </div>
{%- endif -%}

{% schema %}
  {
    "name": "FAQ",
    "description": "Display FAQ section.",
    "tag": "section",
    "class": "faq",
    "settings": [
      {
        "type": "header",
        "content": "General settings"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Title",
        "default": "Frequently asked questions"
      },
      {
        "type": "text",
        "id": "title_bg",
        "label": "Title on the background",
        "default": "FAQ"
      },
      {
        "type": "contentEditor",
        "id": "description",
        "label": "Description",
        "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique."
      },
      {
        "type": "select",
        "id": "behavior",
        "label": "Accordion mode",
        "options": [
          {
            "value": "single",
            "label": "Single"
          },
          {
            "value": "multiple",
            "label": "Multiple"
          }
        ],
        "default": "multiple"
      },
      {
        "type": "color",
        "id": "background",
        "label": "Background color",
        "info": "Note: This color always overrides the default color, and is applied to this section only"
      },
      {
        "type": "color",
        "id": "color",
        "label": "Foreground color",
        "info": "Note: This color always overrides the default color, and is applied to this section only"
      },
      {
        "type": "color",
        "id": "title_color",
        "label": "Title color",
        "info": "Note: This color always overrides the default color, and is applied to this section only"
      },
      {
        "type": "color",
        "id": "border_color",
        "label": "Border color",
        "info": "Note: This color always overrides the default color, and is applied to this section only"
      },
      {
        "type": "header",
        "content": "Desktop settings"
      },
      {
        "type": "number",
        "id": "padding_top",
        "label": "Padding top",
        "min": 0,
        "max": 150,
        "default": 112,
        "info": "Note: Use positive numbers only"
      },
      {
        "type": "number",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "min": 0,
        "max": 150,
        "default": 112,
        "info": "Note: Use positive numbers only"
      },
      {
        "type": "header",
        "content": "Mobile settings"
      },
      {
        "type": "number",
        "id": "padding_top_mobile",
        "label": "Padding top",
        "min": 0,
        "max": 100,
        "default": 40,
        "info": "Note: Use positive numbers only"
      },
      {
        "type": "number",
        "id": "padding_bottom_mobile",
        "label": "Padding bottom",
        "min": 0,
        "max": 100,
        "default": 40,
        "info": "Note: Use positive numbers only"
      }
    ],
    "blocks": [
      {
        "type": "block",
        "name": "Block",
        "settings": [
          {
            "type": "text",
            "id": "heading",
            "label": "Question",
            "default": "How do I rent a product from your shop?"
          },
          {
            "type": "contentEditor",
            "id": "content",
            "label": "Answer",
            "default": "Lorem ipsum dolor sit amet consectetur. Ut sagittis massa diam bibendum netus in morbi. Imperdiet quis tempor nunc cum convallis massa. Risus egestas amet nam aliquet vulputate in non morbi blandit. Libero ultrices hendrerit purus id. Ultrices sed facilisi habitasse lobortis. Risus arcu donec duis id enim quam. Nisl pulvinar tortor amet posuere magna tincidunt."
          }
        ]
      }
    ]
  }
{% endschema %}
