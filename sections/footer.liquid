{{ "footer.css" | asset_url | stylesheet_tag }}

{%- assign logo	                       = section.settings.logo -%}
{%- assign custom_title	               = section.settings.custom_title -%}
{%- assign bottom_text                 = section.settings.bottom_text -%}
{%- assign bottom_menu                 = section.settings.bottom_menu -%}
{%- assign footer_background           = section.settings.footer_background -%}
{%- assign footer_foreground           = section.settings.footer_foreground -%}
{%- assign footer_foreground_secondary = section.settings.footer_foreground_secondary -%}
{%- assign footer_foreground_third     = section.settings.footer_foreground_third -%}
{%- assign footer_border               = section.settings.footer_border -%}
{%- assign padding_top                 = section.settings.padding_top -%}
{%- assign padding_bottom              = section.settings.padding_bottom -%}
{%- assign padding_top_mobile          = section.settings.padding_top_mobile -%}
{%- assign padding_bottom_mobile       = section.settings.padding_bottom_mobile -%}

{% comment %} CSS variables start {% endcomment %}
{%- capture variables -%}
  {%- if footer_background != blank -%}
    --color-primary-background: {{ footer_background }};
  {%- endif -%}
  {%- if footer_foreground != blank -%}
    --color-primary-foreground: {{ footer_foreground }};
  {%- endif -%}
  {%- if footer_foreground_secondary != blank -%}
    --color-secondary-foreground: {{ footer_foreground_secondary }};
  {%- endif -%}
  {%- if footer_foreground_third != blank -%}
    --color-third-foreground: {{ footer_foreground_third }};
  {%- endif -%}
  {%- if footer_border != blank -%}
    --color-border-secondary: {{ footer_border }};
  {%- endif -%}

  {%- case padding_top -%}
    {%- when 'small' -%}
      --padding-top: 50px;
    {%- when 'medium' -%}
      --padding-top: 80px;
    {%- when 'large' -%}
      --padding-top: 112px;
  {%- endcase -%}

  {%- case padding_bottom -%}
    {%- when 'small' -%}
      --padding-bottom: 50px;
    {%- when 'medium' -%}
      --padding-bottom: 80px;
    {%- when 'large' -%}
      --padding-bottom: 112px;
  {%- endcase -%}

  {%- case padding_top_mobile -%}
    {%- when 'small' -%}
      --padding-top-mobile: 24px;
    {%- when 'medium' -%}
      --padding-top-mobile: 40px;
    {%- when 'large' -%}
      --padding-top-mobile: 60px;
  {%- endcase -%}

  {%- case padding_bottom_mobile -%}
    {%- when 'small' -%}
      --padding-bottom-mobile: 24px;
    {%- when 'medium' -%}
      --padding-bottom-mobile: 40px;
    {%- when 'large' -%}
      --padding-bottom-mobile: 60px;
  {%- endcase -%}
{%- endcapture -%}
{% comment %} CSS variables end {% endcomment %}

{% comment %} Logo component {% endcomment %}
{%- capture footer_logo -%}
  {%- if logo.url != blank -%}
    {%- render 'image',
        image: logo,
        class: 'footer__logo-image',
        custom_width: '170',
        custom_size: '170px',
        custom_alt: shop.name
    -%}
  {%- elsif custom_title != blank -%}
    <h2 class="footer__logo-text">
      {{- custom_title -}}
    </h2>
  {%- elsif shop.logo_url != blank -%}
    <img
      src="{{ shop.logo_url }}"
      alt="{{ shop.name }}"
      class="footer__logo-image"
    >
  {%- else -%}
    <h2 class="footer__logo-text">
      {{- shop.name -}}
    </h2>
  {%- endif -%}
{%- endcapture -%}

{% comment %} Menu component {% endcomment %}
{%- capture footer_menu -%}
  <nav class="footer__menu">
    {%- for block in section.blocks -%}
      {%- assign heading      = block.settings.heading -%}
      {%- assign menu         = block.settings.menu -%}
      {%- assign menu_align   = block.settings.menu_align -%}

      {%- capture menu_variables -%}
        {%- case menu_align -%}
          {%- when 'left' -%}
            --footer-menu-align: left;
          {%- when 'center' -%}
            --footer-menu-align: center;
          {%- when 'right' -%}
            --footer-menu-align: right;
        {%- endcase -%}
      {%- endcapture -%}

      {% case block.type %}
        {% when "menu" %}
          {%- if menu != blank -%}
            <div class="footer__menu-wrapper" id="{{- block.id -}}" style="{{- menu_variables | escape -}}">
              <strong class="footer__menu-heading">
                {{- heading -}}
              </strong>

              <ul class="footer__menu-list">
                {%- for link in menu.items -%}
                  {%- if link != blank -%}
                    <li class="footer__menu-item">
                      <a href="{{ link.url }}" class="footer__menu-link">
                        {{- link.title -}}
                      </a>
                    </li>
                  {%- endif -%}
                {%- endfor -%}
              </ul>
            </div>
          {%- endif -%}
      {%- endcase -%}
    {%- endfor -%}
  </nav>
{%- endcapture -%}

{% comment %} Payments and social component {% endcomment %}
{%- capture footer_icons -%}
  <div class="footer__icons">
    {%- for block in section.blocks -%}
      {%- assign social_size      = block.settings.social_size -%}
      {%- assign social_spacing   = block.settings.social_spacing -%}
      {%- assign payment_size     = block.settings.payment_size -%}
      {%- assign payment_spacing  = block.settings.payment_spacing -%}

      {% comment %} CSS variables start {% endcomment %}
      {%- capture social_variables -%}
        {%- case social_size -%}
          {%- when 'sm' -%}
            --footer-social-size: 18px;
          {%- when 'md' -%}
            --footer-social-size: 21px;
          {%- when 'lg' -%}
            --footer-social-size: 24px;
        {%- endcase -%}

        {%- case social_spacing -%}
          {%- when 'sm' -%}
            --footer-social-spacing: 5px;
          {%- when 'md' -%}
            --footer-social-spacing: 7px;
          {%- when 'lg' -%}
            --footer-social-spacing: 9px;
        {%- endcase -%}
      {%- endcapture -%}

      {%- capture payment_variables -%}
        {%- case payment_size -%}
          {%- when 'sm' -%}
            --footer-payment-size: 30px;
          {%- when 'md' -%}
            --footer-payment-size: 32px;
          {%- when 'lg' -%}
            --footer-payment-size: 34px;
        {%- endcase -%}

        {%- case payment_spacing -%}
          {%- when 'sm' -%}
            --footer-payment-spacing: 2px;
          {%- when 'md' -%}
            --footer-payment-spacing: 3px;
          {%- when 'lg' -%}
            --footer-payment-spacing: 4px;
        {%- endcase -%}
      {%- endcapture -%}
      {% comment %} CSS variables end {% endcomment %}

      {%- case block.type -%}
        {%- when "socials" -%}
          <div class="footer__social" id="{{- block.id -}}" style="{{- social_variables | escape -}}">
            {%- include "socials" -%}
          </div>

        {%- when "payment-methods" -%}
          <div class="footer__payments payments" id="{{- block.id -}}" style="{{- payment_variables | escape -}}">
            {%- include "payments" -%}
          </div>
      {%- endcase -%}
    {%- endfor -%}
  </div>
{%- endcapture -%}

{% comment %} Bottom menu component {% endcomment %}
{%- capture footer_bottom_menu -%}
  {%- if bottom_menu != blank -%}
    <nav class="footer__bottom-menu">
      <ul class="footer__bottom-menu-list">
        {%- for link in bottom_menu.items -%}
          {%- if link != blank -%}
            <li class="footer__bottom-menu-item">
              <a href="{{ link.url }}" class="footer__bottom-menu-link">
                {{- link.title -}}
              </a>
            </li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    </nav>
  {%- endif -%}
{%- endcapture -%}

<div
     class="footer__wrapper{% if padding_top != blank or padding_top_mobile != blank %} footer__wrapper--padding-top{% endif %}{% if padding_bottom != blank or padding_bottom_mobile != blank %} footer__wrapper--padding-bottom{%- endif -%}"
     style="{{- variables | escape -}}"
>
  <div class="footer__container container">
    <div class="footer__top{% if footer_logo != blank %} footer__top--with-logo{%- endif -%}">
      <div class="footer__logo-wrapper">
        <a href="{{ routes.root_url }}" class="footer__logo">
          {{- footer_logo -}}
        </a>
      </div>

      {{- footer_menu -}}

    </div>

    <div class="footer__bottom{% if bottom_text == blank and footer_bottom_menu == blank %} footer__bottom--copyright-hidden{%- endif -%}">
      {%- unless bottom_text == blank and footer_bottom_menu == blank -%}
        <div class="footer__copy">
          {%- if bottom_text != blank -%}
            <p>
              {{ "now" | date: "%Y" }}
              {{ shop.name }}.
              {{ bottom_text }}
            </p>
          {%- endif -%}

          {%- if footer_bottom_menu != blank -%}
            {{- footer_bottom_menu -}}
          {%- endif -%}
        </div>
      {%- endunless -%}

      {{- footer_icons -}}

    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Footer",
    "tag": "footer",
    "class": "footer",
    "templates": [],
    "settings":[
      {
        "type": "header",
        "content": "General settings"
      },
      {
        "type": "image_picker",
        "id": "logo",
        "label": "Logo"
      },
      {
        "type": "text",
        "id": "custom_title",
        "label": "Custom title",
        "description": "Note: Footer logo always overrides this title"
      },
      {
        "type": "text",
        "id": "bottom_text",
        "label": "Bottom text",
        "default": "2023 Booqable. All right reserved."
      },
      {
        "type": "menu",
        "id": "bottom_menu",
        "label": "Bottom menu",
        "info": "Note: This menu located at the bottom of footer"
      },
      {
        "type": "color",
        "id": "footer_background",
        "label": "Background color",
        "info": "Note: This color always overrides the default color, and is applied to this section only"
      },
      {
        "type": "color",
        "id": "footer_foreground",
        "label": "Foreground primary color",
        "info": "Note: This color always overrides the default color, and is applied to this section only"
      },
      {
        "type": "color",
        "id": "footer_foreground_secondary",
        "label": "Foreground secondary color",
        "info": "Note: This color always overrides the default color, and is applied to this section only"
      },
      {
        "type": "color",
        "id": "footer_foreground_third",
        "label": "Foreground third color",
        "info": "Note: This color always overrides the default color, and is applied to this section only. Used for bottom text of footer."
      },
      {
        "type": "color",
        "id": "footer_border",
        "label": "Border color",
        "info": "Note: This color always overrides the default color, and is applied to this section only."
      },
      {
        "type": "header",
        "content": "Desktop settings"
      },
      {
        "type": "select",
        "id": "padding_top",
        "label": "Padding top",
        "options": [
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "medium"
      },
      {
        "type": "select",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "options": [
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "medium"
      },
      {
        "type": "header",
        "content": "Mobile settings"
      },
      {
        "type": "select",
        "id": "padding_top_mobile",
        "label": "Padding top",
        "options": [
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "small"
      },
      {
        "type": "select",
        "id": "padding_bottom_mobile",
        "label": "Padding bottom",
        "options": [
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "small"
      }
    ],
    "blocks":[
      {
        "type": "menu",
        "name": "Menu",
        "limit": 5,
        "settings": [
          {
            "type": "header",
            "content": "Menu settings"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Column One"
          },
          {
            "type": "menu",
            "id": "menu",
            "label": "Menu",
            "info": "Note: Submenu isn't supported"
          },
          {
            "type": "header",
            "content": "Mobile settings"
          },
          {
            "type": "select",
            "id": "menu_align",
            "label": "Horizontal alignment",
            "options": [
              {
                "value": "left",
                "label": "Left"
              },
              {
                "value": "center",
                "label": "Center"
              },
              {
                "value": "right",
                "label": "Right"
              }
            ],
            "default": "left"
          }
        ]
      },
      {
        "type": "socials",
        "name": "Socials",
        "limit": 1,
        "settings":[
          {
            "type": "header",
            "content": "Icon settings"
          },
          {
            "type": "select",
            "id": "social_size",
            "label": "Size",
            "options": [
              {
                "value": "sm",
                "label": "Small"
              },
              {
                "value": "md",
                "label": "Medium"
              },
              {
                "value": "lg",
                "label": "Large"
              }
            ],
            "default": "md"
          },
          {
            "type": "select",
            "id": "social_spacing",
            "label": "Spacing",
            "options": [
              {
                "value": "sm",
                "label": "Small"
              },
              {
                "value": "md",
                "label": "Medium"
              },
              {
                "value": "lg",
                "label": "Large"
              }
            ],
            "default": "lg"
          }
        ]
      },
      {
        "type": "payment-methods",
        "name": "Payment methods",
        "limit": 1,
        "settings": [
          {
            "type": "header",
            "content": "Icon settings"
          },
          {
            "type": "select",
            "id": "payment_size",
            "label": "Size",
            "options": [
              {
                "value": "sm",
                "label": "Small"
              },
              {
                "value": "md",
                "label": "Medium"
              },
              {
                "value": "lg",
                "label": "Large"
              }
            ],
            "default": "md"
          },
          {
            "type": "select",
            "id": "payment_spacing",
            "label": "Spacing",
            "options": [
              {
                "value": "sm",
                "label": "Small"
              },
              {
                "value": "md",
                "label": "Medium"
              },
              {
                "value": "lg",
                "label": "Large"
              }
            ],
            "default": "md"
          }
        ]
      }
    ]
  }
{% endschema %}
