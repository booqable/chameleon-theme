{{ "footer.css" | asset_url | stylesheet_tag }}

{%- assign logo                     = section.settings.logo -%}
{%- assign custom_title 			= section.settings.custom_title -%}
{%- assign bottom_menu 				= section.settings.bottom_menu -%}
{%- assign footer_background 		= section.settings.footer_background -%}
{%- assign footer_foreground 		= section.settings.footer_foreground -%}
{%- assign hide_copy 					= section.settings.hide_copy -%}
{%- assign padding_top 				= section.settings.padding_top -%}
{%- assign padding_bottom 			= section.settings.padding_bottom -%}
{%- assign padding_top_mobile 		= section.settings.padding_top_mobile -%}
{%- assign padding_bottom_mobile 	= section.settings.padding_bottom_mobile -%}

{% comment %} CSS variables {% endcomment %}
{%- capture variables -%}
    --color-footer-background: {{ footer_background }};
    --color-footer-foreground: {{ footer_foreground }};
    --padding-top: {{ padding_top }}px;
    --padding-bottom: {{ padding_bottom }}px;
    --padding-top-mobile: {{ padding_top_mobile }}px;
    --padding-bottom-mobile: {{ padding_bottom_mobile }}px;
{%- endcapture -%}

{% comment %} Logo component {% endcomment %}
{%- capture footer_logo -%}
	{%- if logo != blank -%}
		<div class="footer__logo-wrapper">
			<a href="{{ routes.root_url }}" class="footer__logo">
				<img
					src="{{ logo | image_url: 'master' }}"
					alt="{{ shop.name }}"
					class="footer__logo-image"
				>
			</a>
		</div>
	{%- elsif custom_title != blank -%}
		<div class="footer__logo-wrapper">
			<a href="{{ routes.root_url }}" class="footer__logo">
				<h2 class="footer__logo-text">
					{{- custom_title -}}
				</h2>
			</a>
		</div>
	{%- elsif shop.logo_url != blank -%}
		<div class="footer__logo-wrapper">
			<a href="{{ routes.root_url }}" class="footer__logo">
				<img
					src="{{ shop.logo_url }}"
					alt="{{ shop.name }}"
					class="footer__logo-image"
				>
			</a>
		</div>
	{%- else -%}
		<div class="footer__logo-wrapper">
			<a href="{{ routes.root_url }}" class="footer__logo">
				<h2 class="footer__logo-text">
					{{- shop.name -}}
				</h2>
			</a>
		</div>
	{%- endif -%}
{%- endcapture -%}

{% comment %} Menu component {% endcomment %}
{%- capture footer_menu -%}
	<nav class="footer__menu">
		{%- for block in section.blocks -%}
			{%- assign heading 				= block.settings.heading -%}
			{%- assign menu 				= block.settings.menu -%}
			{%- assign menu_align 			= block.settings.menu_align -%}
			{%- assign links_color 			= block.settings.links_color -%}

			{%- capture menu_variables -%}
				{%- case menu_align -%}
					{%- when 'left' -%}
						--menu-align: left;
					{%- when 'center' -%}
						--menu-align: center;
					{%- when 'right' -%}
						--menu-align: right;
				{%- endcase -%}
			{%- endcapture -%}

			{% case block.type %}
				{% when "menu" %}
					{%- if menu != blank -%}
						<div class="footer__menu-instance" style="{{- menu_variables | escape -}}">
							<strong class="footer__menu-heading">
								{{- heading -}}
							</strong>

							<ul class="footer__menu-list">
								{%- for link in menu.items -%}
									{%- if link != blank -%}
										<li class="footer__menu-item">
											<a href="{{ link.url }}" class="footer__menu-link{% if links_color %} footer__menu-link--accent{%- endif -%}">
												{{- link.title -}}
											</a>
										</li>
									{%- endif -%}
								{%- endfor -%}
							</ul>
						</div>
					{%- endif -%}
			{%- endcase -%}
		{%- endfor -%}
	</nav>
{%- endcapture -%}

{% comment %} Payments component {% endcomment %}
{%- capture footer_icons -%}
	<div class="footer__icons">
		{%- for block in section.blocks -%}
			{%- assign social_size 			= block.settings.social_size -%}
			{%- assign social_spacing 		= block.settings.social_spacing -%}
			{%- assign payment_size 		= block.settings.payment_size -%}
			{%- assign payment_spacing 		= block.settings.payment_spacing -%}

			{%- capture social_variables -%}
				{%- case social_size -%}
					{%- when 'sm' -%}
						--social-size: 18px;
					{%- when 'md' -%}
						--social-size: 21px;
					{%- when 'lg' -%}
						--social-size: 24px;
				{%- endcase -%}

				{%- case social_spacing -%}
					{%- when 'sm' -%}
						--social-spacing: 5px;
					{%- when 'md' -%}
						--social-spacing: 7px;
					{%- when 'lg' -%}
						--social-spacing: 9px;
				{%- endcase -%}
			{%- endcapture -%}

			{%- capture payment_variables -%}
				{%- case payment_size -%}
					{%- when 'sm' -%}
						--payment-size: 30px;
					{%- when 'md' -%}
						--payment-size: 32px;
					{%- when 'lg' -%}
						--payment-size: 34px;
				{%- endcase -%}

				{%- case payment_spacing -%}
					{%- when 'sm' -%}
						--payment-spacing: 2px;
					{%- when 'md' -%}
						--payment-spacing: 3px;
					{%- when 'lg' -%}
						--payment-spacing: 4px;
				{%- endcase -%}
			{%- endcapture -%}

			{%- case block.type -%}

			{%- when "socials" -%}
				<div class="footer__social" style="{{- social_variables | escape -}}">
					{%- include "socials" -%}
				</div>

			{%- when "payment-methods" -%}
				<div class="footer__payments" style="{{- payment_variables | escape -}}">
					{%- if payment_methods.size > 0 -%}
						<div class="footer__payment">
							{%- for provider in payment_methods -%}
								{%- case provider -%}
									{%- when "paypal" -%}
										<i class="fa-brands fa-cc-paypal" title="PayPal"></i>
									{%- when "creditcard" -%}
										<i class="fa-brands fa-cc-visa" title="Visa"></i>
										<i class="fa-brands fa-cc-mastercard" title="MasterCard"></i>
										<i class="fa-brands fa-cc-amex" title="American Express"></i>
									{%- when "ideal" -%}
										<i class="fa-brands fa-ideal" title="iDEAL"></i>
									{%- when "alipay" -%}
										<i class="fa-brands fa-alipay" title="Alipay"></i>
									{%- when "p24" -%}
										{%- include "p24-icon" -%}
									{%- when "eps" -%}
										{%- include "eps-icon" -%}
									{%- when "bancontact" -%}
										{%- include "bancontact-icon" -%}
									{%- when "giropay" -%}
										{%- include "giropay-icon" -%}
								{%- endcase -%}
							{%- endfor -%}
						</div>
					{%- else -%}
						<div class="footer__payment">
							<i class="fa-brands fa-cc-stripe" title="Stripe"></i>
							<i class="fa-brands fa-cc-paypal" title="PayPal"></i>
						</div>
					{%- endif -%}
				</div>
			{%- endcase -%}
		{%- endfor -%}
	</div>
{%- endcapture -%}

{% comment %} Bottom menu component {% endcomment %}
{%- capture footer_bottom_menu -%}
	{%- if bottom_menu != blank -%}
		<nav class="footer__bottom-menu">
			<ul class="footer__bottom-menu-list">
				{%- for link in bottom_menu.items -%}
					{%- if link != blank -%}
						<li class="footer__bottom-menu-item">
							<a href="{{ link.url }}" class="footer__bottom-menu-link">
								{{- link.title -}}
							</a>
						</li>
					{%- endif -%}
				{%- endfor -%}
			</ul>
		</nav>
	{%- endif -%}
{%- endcapture -%}

<div class="footer__wrapper{% if padding_top != 0 or padding_top_mobile != 0 %} footer__wrapper--padding-top{% endif %}{% if padding_bottom != 0 or padding_bottom_mobile != 0 %} footer__wrapper--padding-bottom{%- endif -%}"  style="{{- variables | escape -}}">
	<div class="footer__container container">
		<div class="footer__top{% if footer_logo != blank %} footer__top--with-logo{%- endif -%}">

			{{- footer_logo -}}

			{{- footer_menu -}}

		</div>

		<div class="footer__bottom{% if hide_copy %} footer__bottom--copyright-hidden{%- endif -%}">
			{%- unless hide_copy -%}
				<div class="footer__copy">
					<p>{{ "now" | date: "%Y" }} Booqable. All right reserved.</p>

					{{- footer_bottom_menu -}}
				</div>
			{%- endunless -%}

			{{- footer_icons -}}

		</div>
	</div>
</div>

{% schema %}
	{
		"name": "Footer",
		"tag": "footer",
		"class": "footer",
		"templates": [],
		"settings":[
			{
				"type": "header",
				"content": "General settings"
			},
			{
                "type": "image_picker",
                "id": "logo",
                "label": "Logo"
            },
            {
                "type": "text",
                "id": "custom_title",
                "label": "Custom title",
                "description": "Note: Footer logo always overrides this title"
            },
			{
				"type": "menu",
				"id": "bottom_menu",
				"label": "Bottom menu",
				"info": "Note: This menu located at the bottom of footer"
			},
			{
                "type": "color",
                "id": "footer_background",
                "label": "Background color",
                "default": "#0E1B2A"
            },
            {
                "type": "color",
                "id": "footer_foreground",
                "label": "Foreground color",
                "default": "#FFFFFF"
            },
			{
				"type": "checkbox",
				"id": "hide_copy",
				"default": false,
				"label": "Hide copyright"
			},
			{
				"type": "header",
				"content": "Desktop settings"
			},
			{
				"type": "number",
				"id": "padding_top",
				"label": "Padding top",
				"default": "80",
				"info": "Note: Use positive numbers only"
			},
			{
				"type": "number",
				"id": "padding_bottom",
				"label": "Padding bottom",
				"default": "80",
				"info": "Note: Use positive numbers only"
			},
			{
				"type": "header",
				"content": "Mobile settings"
			},
			{
				"type": "number",
				"id": "padding_top_mobile",
				"label": "Padding top",
				"default": "24",
				"info": "Note: Use positive numbers only"
			},
			{
				"type": "number",
				"id": "padding_bottom_mobile",
				"label": "Padding bottom",
				"default": "24",
				"info": "Note: Use positive numbers only"
			}
		],
		"blocks":[
			{
				"type": "menu",
				"id": "menu",
				"name": "Menu",
				"limit": 5,
				"settings": [
					{
						"type": "header",
						"content": "Menu settings"
					},
					{
						"type": "text",
						"id": "heading",
						"label": "Heading",
						"default": "Column One"
					},
					{
						"type": "menu",
						"id": "menu",
						"label": "Menu",
						"info": "Note: Submenu isn't supported"
					},
					{
						"type": "checkbox",
						"id": "links_color",
						"default": false,
						"label": "Use accent color for links"
					},
					{
						"type": "header",
						"content": "Mobile settings"
					},
					{
						"type": "select",
						"id": "menu_align",
						"label": "Horizontal alignment",
						"options": [
							{
								"value": "left",
								"label": "Left"
							},
							{
								"value": "center",
								"label": "Center"
							},
							{
								"value": "right",
								"label": "Right"
							}
						],
						"default": "left"
					}
				]
			},
			{
				"type": "socials",
				"name": "Socials",
				"limit": 1,
				"settings":[
					{
						"type": "header",
						"content": "Icon settings"
					},
					{
						"type": "select",
						"id": "social_size",
						"label": "Size",
						"options": [
							{
								"value": "sm",
								"label": "Small"
							},
							{
								"value": "md",
								"label": "Medium"
							},
							{
								"value": "lg",
								"label": "Large"
							}
						],
						"default": "md"
					},
					{
						"type": "select",
						"id": "social_spacing",
						"label": "Spacing",
						"options": [
							{
								"value": "sm",
								"label": "Small"
							},
							{
								"value": "md",
								"label": "Medium"
							},
							{
								"value": "lg",
								"label": "Large"
							}
						],
						"default": "lg"
					}
				]
			},
			{
				"type": "payment-methods",
				"name": "Payment methods",
				"limit": 1,
				"settings": [
					{
						"type": "header",
						"content": "Icon settings"
					},
					{
						"type": "select",
						"id": "payment_size",
						"label": "Size",
						"options": [
							{
								"value": "sm",
								"label": "Small"
							},
							{
								"value": "md",
								"label": "Medium"
							},
							{
								"value": "lg",
								"label": "Large"
							}
						],
						"default": "md"
					},
					{
						"type": "select",
						"id": "payment_spacing",
						"label": "Spacing",
						"options": [
							{
								"value": "sm",
								"label": "Small"
							},
							{
								"value": "md",
								"label": "Medium"
							},
							{
								"value": "lg",
								"label": "Large"
							}
						],
						"default": "md"
					}
				]
			}
		]
	}
{% endschema %}
