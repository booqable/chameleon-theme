{{ "offices.css" | asset_url | stylesheet_tag }}
{{ "tabs.css" | asset_url | stylesheet_tag }}

{%- assign opener                = section.settings.opener -%}
{%- assign placement             = section.settings.placement -%}
{%- assign color_palette         = section.settings.color_palette -%}
{%- assign padding_top           = section.settings.padding_top -%}
{%- assign padding_bottom        = section.settings.padding_bottom -%}
{%- assign padding_top_mobile    = section.settings.padding_top_mobile -%}
{%- assign padding_bottom_mobile = section.settings.padding_bottom_mobile -%}
{%- assign image_placeholder     = settings.image_placeholder -%}

{% comment %} CSS variables start {% endcomment %}
{%- capture variables -%}
  --max-width: 1344px;

  {%- case padding_top -%}
    {%- when 'none' -%}
      --padding-top: 0;
    {%- when 'small' -%}
      --padding-top: 50px;
    {%- when 'medium' -%}
      --padding-top: 80px;
    {%- when 'large' -%}
      --padding-top: 112px;
  {%- endcase -%}

  {%- case padding_bottom -%}
    {%- when 'none' -%}
      --padding-bottom: 0;
    {%- when 'small' -%}
      --padding-bottom: 50px;
    {%- when 'medium' -%}
      --padding-bottom: 80px;
    {%- when 'large' -%}
      --padding-bottom: 112px;
  {%- endcase -%}

  {%- case padding_top_mobile -%}
    {%- when 'none' -%}
      --padding-top-mobile: 0;
    {%- when 'small' -%}
      --padding-top-mobile: 24px;
    {%- when 'medium' -%}
      --padding-top-mobile: 48px;
    {%- when 'large' -%}
      --padding-top-mobile: 70px;
  {%- endcase -%}

  {%- case padding_bottom_mobile -%}
    {%- when 'none' -%}
      --padding-bottom-mobile: 0;
    {%- when 'small' -%}
      --padding-bottom-mobile: 24px;
    {%- when 'medium' -%}
      --padding-bottom-mobile: 48px;
    {%- when 'large' -%}
      --padding-bottom-mobile: 70px;
  {%- endcase -%}

  {%- case placement -%}
    {%- when 'left' -%}
      --direction: rtl;
    {%- when 'right' -%}
      --direction: ltr;
  {%- endcase -%}
{%- endcapture -%}
{% comment %} CSS variables end {% endcomment %}

{%- capture tabs -%}
  <ul class="tabs__tab">
    {%- for block in section.blocks -%}
      {%- assign first   = forloop.first -%}
      {%- assign index   = forloop.index -%}
      {%- assign heading = block.settings.heading -%}
      {%- assign address = block.settings.address -%}
      {%- assign label   = block.settings.label -%}
      {%- assign url     = block.settings.url -%}

      <li data-trigger="tab-{{- index -}}" class="tabs__trigger{% if first %} active{%- endif -%}" id="{{- block.id -}}">
        {%- if heading != blank -%}
          <span class="tabs__heading">{{- heading -}}</span>
        {%- endif -%}

        {%- if address != blank -%}
          <address class="tabs__address">{{- address -}}</address>
        {%- endif -%}

        {%- if label != blank and url != blank -%}
          <a href="{{  url }}" class="tabs__link button button--secondary" target="_blank">
            {{- label -}}
          </a>
        {%- endif -%}
      </li>
    {%- endfor -%}
  </ul>
{%- endcapture -%}

{%- capture tabs_content -%}
  <div class=“tabs__contents”>
    {%- for block in section.blocks -%}
      {%- assign first = forloop.first -%}
      {%- assign index = forloop.index -%}
      {%- assign image = block.settings.image -%}

      {%- if image != blank -%}
        {%- assign image = image -%}
      {%- elsif image_placeholder != blank -%}
        {%- assign image = image_placeholder -%}
      {%- else -%}
        {%- assign image = blank -%}
      {%- endif -%}

      <div data-content="tab-{{- index -}}" class="tabs__content{% if first %} active{%- endif -%}">
        <div class="tabs__image-wrapper{% if image == blank %} no-image{%- endif -%}">
          {%- if image != blank -%}
            {%- render 'image',
              image: image,
              loading: 'lazy',
              class: 'tabs__image',
              size: 'm'
            -%}
          {%- endif -%}
        </div>
      </div>
    {%- endfor -%}
  </div>
{%- endcapture -%}

<div
  class="offices__wrapper{% if color_palette != blank %} palette-{{ color_palette }}{%  endif %}{% if padding_top != blank or padding_top_mobile != blank %} offices__wrapper--padding-top{% endif %}{% if padding_bottom != blank or padding_bottom_mobile != blank %} offices__wrapper--padding-bottom{%- endif -%}"
  style="{{- variables | escape -}}"
>
  <div class="offices__container container">
    <div class="offices__tabs tabs">
      <div class="tabs--mobile">
        <div class="tabs__select">
          <input type="checkbox" id="tabs-select-opener" style="display: none">
          <label for="tabs-select-opener" class="tabs__select-opener">
            {{- opener -}}
            {%- render 'icon-arrow-right' -%}
          </label>

          <div class="tabs__select-drop">
            {{- tabs -}}
          </div>
        </div>

      </div>

      <div class="tabs--desktop">
        {{- tabs -}}
      </div>

      {{- tabs_content -}}
    </div>
  </div>
</div>

<script src="{{ "tabs.js" | asset_url }}" defer></script>

{% schema %}
  {
    "name": "Offices",
    "tag": "section",
    "class": "offices",
    "description": "Display the addresses of offices with coordinates on a map",
    "blocks":[
      {
        "type": "tab",
        "name": "Tab",
        "settings": [
          {
            "type": "header",
            "content": "Basic settings"
          },
          {
            "type": "paragraph",
            "content": "Below you can change the content of block"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Sydney"
          },
          {
            "type": "contentEditor",
            "id": "address",
            "label": "Address",
            "default": "123 Sample St, Sydney NSW 2000 AU"
          },
          {
            "type": "header",
            "content": "Buttons"
          },
          {
            "type": "text",
            "id": "label",
            "label": "Button label",
            "info": "Note: Leave label blank to disable the button",
            "default": "View Map"
          },
          {
            "type": "url",
            "id": "url",
            "label": "Button link"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          }
        ]
      }
    ],
    "settings": [
      {
        "type": "header",
        "content": "Basic settings"
      },
      {
        "type": "paragraph",
        "content": "Below you can change the content of section"
      },
      {
        "type": "text",
        "id": "opener",
        "label": "Mobile opener",
        "default": "Open to a view list of offices"
      },
      {
        "type": "header",
        "content": "Advanced settings"
      },
      {
        "type": "paragraph",
        "content": "Below you can change the appearance and the components' functionality of the section"
      },
      {
        "type": "select",
        "id": "color_palette",
        "label": "Color palette",
        "options": [
          {
            "value": "one",
            "label": "Color set 1"
          },
          {
            "value": "two",
            "label": "Color set 2"
          }
        ],
        "default": "one"
      },
      {
        "type": "header",
        "content": "Desktop settings"
      },
      {
        "type": "select",
        "id": "placement",
        "label": "Map placement",
        "options": [
          {
            "value": "left",
            "label": "Left"
          },
          {
            "value": "right",
            "label": "Right"
          }
        ],
        "default": "right"
      },
      {
        "type": "select",
        "id": "padding_top",
        "label": "Padding top",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "large"
      },
      {
        "type": "select",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "large"
      },
      {
        "type": "header",
        "content": "Mobile settings"
      },
      {
        "type": "select",
        "id": "padding_top_mobile",
        "label": "Padding top",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "large"
      },
      {
        "type": "select",
        "id": "padding_bottom_mobile",
        "label": "Padding bottom",
        "options": [
          {
            "value": "none",
            "label": "None"
          },
          {
            "value": "small",
            "label": "Small"
          },
          {
            "value": "medium",
            "label": "Medium"
          },
          {
            "value": "large",
            "label": "Large"
          }
        ],
        "default": "large"
      }
    ]
  }
{% endschema %}
