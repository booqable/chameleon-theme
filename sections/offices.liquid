{{ "offices.css" | asset_url | stylesheet_tag }}

{%- assign tag                   = section.settings.tag -%}
{%- assign title                 = section.settings.title -%}
{%- assign title_bg              = section.settings.title_bg -%}
{%- assign description           = section.settings.description -%}
{%- assign padding_top           = section.settings.padding_top -%}
{%- assign padding_bottom        = section.settings.padding_bottom -%}
{%- assign padding_top_mobile    = section.settings.padding_top_mobile -%}
{%- assign padding_bottom_mobile = section.settings.padding_bottom_mobile -%}

{% comment %} CSS variables start {% endcomment %}
{%- capture variables -%}
  {%- if padding_top != blank -%}
    --padding-top: {{ padding_top }}px;
  {%- endif -%}
  {%- if padding_bottom != blank -%}
    --padding-bottom: {{ padding_bottom }}px;
  {%- endif -%}
  {%- if padding_top_mobile != blank -%}
    --padding-top-mobile: {{ padding_top_mobile }}px;
  {%- endif -%}
  {%- if padding_bottom_mobile != blank -%}
    --padding-bottom-mobile: {{ padding_bottom_mobile }}px;
  {%- endif -%}
{%- endcapture -%}
{% comment %} CSS variables end {% endcomment %}

<div
  class="offices__wrapper{% if padding_top != blank or padding_top_mobile != blank %} offices__wrapper--padding-top{% endif %}{% if padding_bottom != blank or padding_bottom_mobile != blank %} offices__wrapper--padding-bottom{%- endif -%}"
  style="{{- variables | escape -}}"
>
  <div class="offices__container container">
    {%- if tag != blank or title != blank or description != blank or title_bg != blank -%}
      {%- render 'section-header',
          tag: tag,
          title: title,
          description: description,
          background: title_bg
      -%}
    {%- endif -%}

    <div class="tabs">
      <ul class="tabs__tab">
        {%- for block in section.blocks -%}
          {%- assign first = forloop.first -%}
          {%- assign index = forloop.index -%}
          {%- assign heading = block.settings.heading -%}

          <li class="tabs__item">
            <a href="#tab-{{- index -}}" class="tabs__trigger{% if first %} active{%- endif -%}">
              {{- heading -}}
            </a>
          </li>
        {%- endfor -%}
      </ul>

      <div class=“tabs__contents”>
        {%- for block in section.blocks -%}
          {%- assign first = forloop.first -%}
          {%- assign index = forloop.index -%}
          {%- assign address = block.settings.address -%}

          <div id="tab-{{- index -}}" class="tabs__content{% if first %} active{%- endif -%}">
            <address>{{- address -}}</address>
          </div>
        {%- endfor -%}
      </div>
    </div>
  </div>
</div>

<script src="{{ "tabs.js" | asset_url }}" defer></script>

{% schema %}
  {
    "name": "Offices",
    "tag": "section",
    "class": "offices",
    "description": "Display the addresses of offices with coordinates on a map",
    "blocks":[
      {
        "type": "tab",
        "name": "Tab",
        "settings": [
          {
            "type": "header",
            "content": "Tab settings"
          },
          {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Sydney"
          },
          {
            "type": "contentEditor",
            "id": "address",
            "label": "Address",
            "default": "123 Sample St, Sydney NSW 2000 AU"
          }
        ]
      }
    ],
    "settings": [
      {
        "type": "header",
        "content": "General settings"
      },
      {
        "type": "text",
        "id": "tag",
        "label": "Tag",
        "default": "Our offices"
      },
      {
        "type": "text",
        "id": "title",
        "label": "Title",
        "default": "Visit our stores"
      },
      {
        "type": "text",
        "id": "title_bg",
        "label": "Title on the background"
      },
      {
        "type": "contentEditor",
        "id": "description",
        "label": "Description",
        "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. "
      },
      {
        "type": "header",
        "content": "Desktop settings"
      },
      {
        "type": "number",
        "id": "padding_top",
        "label": "Padding top",
        "min": 0,
        "max": 150,
        "default": 112,
        "info": "Note: Use positive numbers only"
      },
      {
        "type": "number",
        "id": "padding_bottom",
        "label": "Padding bottom",
        "min": 0,
        "max": 150,
        "default": 112,
        "info": "Note: Use positive numbers only"
      },
      {
        "type": "header",
        "content": "Mobile settings"
      },
      {
        "type": "number",
        "id": "padding_top_mobile",
        "label": "Padding top",
        "min": 0,
        "max": 100,
        "default": 70,
        "info": "Note: Use positive numbers only"
      },
      {
        "type": "number",
        "id": "padding_bottom_mobile",
        "label": "Padding bottom",
        "min": 0,
        "max": 100,
        "default": 70,
        "info": "Note: Use positive numbers only"
      }
    ]
  }
{% endschema %}
